<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ’ Pink Proposal â€” Shareable & Romantic Celebration</title>

<style>
/* ---------------- GLOBAL THEME & BG ANIMATION ---------------- */
:root{
  --pink-1:#ffdee9;
  --pink-2:#ffb6d9;
  --accent:#ff4fa3;
  --dark:#2b0018;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  height:100vh;
  overflow-x:hidden;
  color:var(--pink-1);
  background: linear-gradient(120deg, #2b0018 0%, #3a0026 50%, #4a0033 100%);
  animation: bgShift 12s infinite alternate ease-in-out;
  text-align:center;
}

/* subtle rounded glowing page border */
body::before{
  content:"";
  position:fixed;
  inset: 6px;
  border-radius:18px;
  box-shadow: 0 0 30px rgba(255,80,150,0.25);
  pointer-events:none;
}

/* background animation */
@keyframes bgShift{
  0%{filter: hue-rotate(0deg) brightness(0.95)}
  50%{filter: hue-rotate(8deg) brightness(1.05)}
  100%{filter: hue-rotate(-6deg) brightness(1)}
}

/* page containers */
.container{
  width:92%;
  max-width:920px;
  margin: 48px auto;
  padding: 28px;
  border-radius:16px;
  backdrop-filter: blur(6px);
  position:relative;
}

/* screens */
.screen{ display:none; padding:6px; }
.screen.active{ display:block; animation: screenIn 550ms ease; }
@keyframes screenIn{ from{opacity:0; transform: translateY(18px)} to{opacity:1; transform:none} }

/* headings & typewriter */
.heading{
  font-size:20px;
  color:var(--pink-2);
  margin:8px 0 18px;
  text-shadow: 0 0 10px rgba(255,80,150,0.18);
}
.typewriter{
  font-size:26px;
  font-weight:700;
  color:var(--accent);
  display:inline-block;
  white-space:pre-wrap;
  text-align:center;
  border-right: 2px solid rgba(255,140,190,0.8);
  padding-right:6px;
  margin-bottom:16px;
}

/* inputs & buttons */
.inputs{ margin:18px 0; }
input[type="text"]{
  width:240px;
  padding:12px 14px;
  border-radius:10px;
  border:2px solid rgba(255,120,170,0.22);
  background: rgba(255,255,255,0.03);
  color:#fff;
  font-size:16px;
  margin:8px;
}
.btn{
  display:inline-block;
  background: linear-gradient(180deg, #ff6fa5, #ff3b86);
  color:white;
  border:none;
  padding:12px 20px;
  border-radius:12px;
  cursor:pointer;
  font-size:16px;
  margin:8px 6px;
  box-shadow: 0 6px 20px rgba(255,70,140,0.18);
  transition: transform .18s ease, box-shadow .18s ease;
}
.btn:active{ transform: translateY(2px); }
.btn:hover{ transform: translateY(-3px); box-shadow: 0 14px 32px rgba(255,60,140,0.28); }

/* small controls row */
.controls{
  margin-top:14px;
  display:flex;
  gap:8px;
  justify-content:center;
  flex-wrap:wrap;
}

/* love meter */
.loveCount{
  font-size:42px;
  font-weight:800;
  color:#ff2a8e;
  text-shadow: 0 0 24px rgba(255,60,140,0.3);
  margin:12px 0;
}

/* multi-language list */
.langList{ text-align:left; margin:18px auto; max-width:720px; color:#ffdfe9; }

/* effect elements (hearts, stars, petals) */
.heart, .star, .petal {
  position:fixed;
  pointer-events:none;
  z-index:2;
  user-select:none;
}
.heart{ animation: floatUp 6s linear infinite; color:#ff77aa; font-size:22px; opacity:0.92; }
@keyframes floatUp { 0%{transform:translateY(0) rotate(0)} 100%{transform:translateY(-110vh) rotate(45deg); opacity:0} }

.star{ animation: starFloat 9s linear infinite; color:#ffd6f0; font-size:12px; opacity:0.8; }
@keyframes starFloat { 0%{transform:translateY(0) scale(0.9)} 100%{transform:translateY(-100vh) scale(1.2); opacity:0} }

.petal{ animation: petalFall linear infinite; font-size:26px; opacity:0.95; }
@keyframes petalFall { 0%{transform:translateY(-10px) rotate(0)} 100%{transform:translateY(110vh) rotate(360deg); opacity:0} }

/* click heart trail */
.clickHeart{
  position:fixed; transform:translate(-50%,-50%); animation: clickUp 900ms ease forwards; font-size:20px; z-index:6;
}
@keyframes clickUp{ 0%{transform:translate(-50%,-50%) translateY(0) scale(1); opacity:1} 100%{transform:translate(-50%,-50%) translateY(-80px) scale(1.6); opacity:0} }

/* burst hearts on YES */
.burstHeart{
  position:absolute;
  transform-origin:center;
  animation: burstAnim 1100ms ease-out forwards;
  font-size:24px;
  z-index:8;
}
@keyframes burstAnim{
  0%{opacity:1; transform:scale(0.3) translateY(0)}
  60%{opacity:1; transform:scale(1.05) translateY(-40px)}
  100%{opacity:0; transform:scale(1.6) translateY(-120px)}
}

/* soft confetti (celebration) */
.confettiPiece{
  position:fixed;
  width:10px; height:14px; z-index:9;
  border-radius:2px;
  animation: confettiFall linear forwards;
}
@keyframes confettiFall{
  0%{transform:translateY(-10vh) rotate(0); opacity:1}
  100%{transform:translateY(110vh) rotate(720deg); opacity:0}
}

/* celebration screen styling (Option B: Romantic) */
.celebrate{
  padding:28px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,200,240,0.04), rgba(255,120,170,0.02));
  box-shadow: 0 10px 40px rgba(255,30,120,0.06);
}
.celebrate .bigText{
  font-size:46px;
  font-weight:900;
  color:#ffecf6;
  text-shadow: 0 6px 30px rgba(255,100,170,0.28);
}
.celebrate .subText{
  font-size:18px;
  color:#ffdff0;
  margin-top:6px;
}

/* subtle floating rose image */
.roseFloat{
  position:fixed; right:10px; bottom:10px; opacity:0.12; width:140px; transform:rotate(-8deg);
  filter: drop-shadow(0 10px 20px rgba(255,60,140,0.06));
  z-index:1; pointer-events:none;
}

/* small responsive */
@media (max-width:520px){
  .typewriter{ font-size:20px; border-right:2px solid rgba(255,140,190,0.8) }
  .bigText{ font-size:34px }
  input[type="text"]{ width:88%; }
}
</style>
</head>
<body>

<!-- container -->
<div class="container">

  <!-- Header -->
  <div style="margin-bottom:6px">
    <div class="heading">ğŸ’– Romantic Proposal Generator â€” Share & Celebrate ğŸ’–</div>
  </div>

  <!-- SCREEN 1: Name input -->
  <div id="screen1" class="screen active">
    <div class="typewriter">Enter details to create a personalized proposal</div>

    <div class="inputs" style="margin-top:12px">
      <input id="fromInput" type="text" placeholder="Your Name (e.g. Ivan)">
      <input id="toInput" type="text" placeholder="Partner Name (e.g. Riya)">
    </div>

    <div>
      <button class="btn" onclick="generateProposal()">Generate Proposal</button>
      <button class="btn" onclick="fillExample()">Try Example</button>
    </div>

    <div class="controls" style="margin-top:10px">
      <button class="btn" onclick="playBgm()">â¯ Play/Pause Music</button>
      <button class="btn" onclick="copyCurrentURL()">ğŸ”— Copy Current Link</button>
    </div>
  </div>

  <!-- SCREEN 2: First message (typewriter) -->
  <div id="screen2" class="screen">
    <div id="type1" class="typewriter"></div>
    <div style="margin-top:18px">
      <button class="btn" onclick="goToStep2()">CLICK BUTTON</button>
      <button class="btn" onclick="goBack(1)">âŸµ Edit Names</button>
    </div>
  </div>

  <!-- SCREEN 3: Second message (typewriter) -->
  <div id="screen3" class="screen">
    <div id="type2" class="typewriter"></div>
    <div style="margin-top:18px">
      <button class="btn" id="yesBtn" onclick="yesClick()">YES / ğá´€ğ¤ğ¤á´€ ğá´€á´€?</button>
      <button class="btn" onclick="goBack(2)">âŸµ Back</button>
    </div>
  </div>

  <!-- SCREEN 4: Final before celebration (shows love meter and share) -->
  <div id="screen4" class="screen">
    <div class="loveCount" id="loveCounter">0 â¤ï¸</div>

    <div style="margin-top:12px">
      <button class="btn" onclick="showCelebrate()">Celebrate!</button>
      <button class="btn" id="waShareBtn" onclick="shareWhatsApp()">Share on WhatsApp</button>
      <button class="btn" onclick="copyProposalLink()">Copy Proposal Link</button>
    </div>

    <div style="margin-top:14px; font-size:14px; color:#ffdfe9">
      Share the link or send on WhatsApp to the person you love.
    </div>
  </div>

  <!-- SCREEN 5: Celebration (Option B: Romantic Scene) -->
  <div id="screen5" class="screen celebrate" style="display:none">
    <img class="roseFloat" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><text x='0' y='120' font-size='120'>ğŸŒ¹</text></svg>" alt="rose"/>
    <div class="bigText" id="celebrateTitle">She Said YES ğŸ’ğŸ’–</div>
    <div class="subText" id="celebrateSub">A new chapter begins â€” love, laughter & forever.</div>

    <div style="margin:18px 0;">
      <button class="btn" onclick="downloadScreenshot()">ğŸ’¾ Save Screenshot</button>
      <button class="btn" onclick="shareWhatsApp(true)">ğŸ“² Share This Celebration</button>
      <button class="btn" onclick="resetAll()">ğŸ” Start New Proposal</button>
    </div>
  </div>

  <!-- language list screen (optional) -->
  <div id="screenLang" class="screen">
    <div class="heading">ğŸ’— 20-Language Proposals</div>
    <div class="langList">
      â¤ï¸ English: Will you marry me?<br>
      ğŸ’• Hindi: Kya tum mujhse shaadi karogi?<br>
      ğŸ’— Urdu: Kya tum mujhse nikah karogi?<br>
      ğŸ’ Marathi: Tu majhshi lagna karshil ka?<br>
      ğŸ’˜ Bengali: à¦¤à§à¦®à¦¿ à¦•à¦¿ à¦†à¦®à¦¾à¦•à§‡ à¦¬à¦¿à¦¯à¦¼à§‡ à¦•à¦°à¦¬à§‡?<br>
      ğŸ’“ Tamil: à®à®©à¯à®©à¯ˆ à®¤à®¿à®°à¯à®®à®£à®®à¯ à®šà¯†à®¯à¯à®¤à¯à®•à¯à®•à¯à®µà®¾à®¯à®¾?<br>
      ğŸ’– Telugu: à°¨à°¨à±à°¨à± à°µà°¿à°µà°¾à°¹à°‚ à°šà±‡à°¸à±à°•à±à°‚à°Ÿà°¾à°µà°¾?<br>
      ğŸ’ Kannada: à²¨à³€à²¨à³ à²¨à²¨à³à²¨ à²œà³Šà²¤à³† à²®à²¦à³à²µà³†à²¯à²¾à²—à³à²¤à³à²¤à³€à²¯à²¾?<br>
      ğŸ’— Gujarati: àª¶à«àª‚ àª¤àª®à«‡ àª®àª¾àª°à«€ àª¸àª¾àª¥à«‡ àª²àª—à«àª¨ àª•àª°àª¶à«‹?<br>
      ğŸ’˜ Punjabi: à¨•à©€ à¨¤à©à¨¸à©€à¨‚ à¨®à©‡à¨°à©‡ à¨¨à¨¾à¨² à¨µà¨¿à¨†à¨¹ à¨•à¨°à©‹à¨‚à¨—à©‡?<br>
      â¤ï¸ Spanish: Â¿Te casarÃ­as conmigo?<br>
      ğŸ’• French: Veux-tu mâ€™Ã©pouser?<br>
      ğŸ’– Arabic: Ù‡Ù„ ØªØªØ²ÙˆØ¬ÙŠÙ†Ù†ÙŠØŸ<br>
      ğŸ’ Turkish: Benimle evlenir misin?<br>
      ğŸ’˜ Japanese: ç§ã¨çµå©šã—ã¦ãã‚Œã¾ã™ã‹ï¼Ÿ<br>
      ğŸ’ Korean: ë‚˜ë‘ ê²°í˜¼í•´ ì¤„ë˜?<br>
      ğŸ’“ Chinese: ä½ æ„¿æ„å«ç»™æˆ‘å—ï¼Ÿ<br>
      ğŸ’— Russian: Ğ¢Ñ‹ Ğ²Ñ‹Ğ¹Ğ´ĞµÑˆÑŒ Ğ·Ğ° Ğ¼ĞµĞ½Ñ?<br>
      ğŸ’– Italian: Vuoi sposarmi?<br>
      ğŸ’• German: Willst du mich heiraten?<br>
    </div>
    <div style="margin-top:12px"><button class="btn" onclick="showScreen('screen1')">âŸµ Back Home</button></div>
  </div>

</div> <!-- /container -->

<!-- Soft background music for proposal -->
<audio id="proposalMusic" loop>
  <!-- Replace src with your hosted "Tu Maan Meri Jaan" file if you have it.
       This sample link is a placeholder â€” hosting copyrighted music yourself is your responsibility. -->
  <source src="https://files.catbox.moe/0p8z4m.mp3" type="audio/mpeg">
</audio>

<!-- Celebration music (soft slow love) -->
<audio id="celebrationMusic" loop>
  <!-- Another sample placeholder audio â€” replace if you host your chosen song. -->
  <source src="https://files.catbox.moe/1j3k9p.mp3" type="audio/mpeg">
</audio>

<!-- tiny helper area for dynamic elements -->
<div id="fxRoot"></div>

<script>
/* ------------------ Utilities & Globals ------------------ */
const screens = {
  s1: document.getElementById('screen1'),
  s2: document.getElementById('screen2'),
  s3: document.getElementById('screen3'),
  s4: document.getElementById('screen4'),
  s5: document.getElementById('screen5'),
  sl: document.getElementById('screenLang')
};
const fromInp = document.getElementById('fromInput');
const toInp = document.getElementById('toInput');
const proposalMusic = document.getElementById('proposalMusic');
const celebrationMusic = document.getElementById('celebrationMusic');
const fxRoot = document.getElementById('fxRoot');
let currentFrom = '';
let currentTo = '';

/* Auto-play attempt (browsers may mute until user interacts) */
function playBgm(){
  if(proposalMusic.paused) proposalMusic.play().catch(()=>{});
  else proposalMusic.pause();
}

/* Pre-fill example */
function fillExample(){
  fromInp.value = 'Ivan';
  toInp.value = 'Riya';
}

/* Simple showScreen */
function showScreen(id){
  Object.values(screens).forEach(el=>el.classList.remove('active'));
  if(id==='screen1') screens.s1.classList.add('active');
  if(id==='screen2') screens.s2.classList.add('active');
  if(id==='screen3') screens.s3.classList.add('active');
  if(id==='screen4') screens.s4.classList.add('active');
  if(id==='screen5') screens.s5.classList.add('active');
  if(id==='screenLang') screens.sl.classList.add('active');
}

/* ------------------ Floating effects (hearts, stars, petals) ------------------ */
function spawnFloating(type){
  const el = document.createElement('div');
  el.className = type;
  if(type==='heart') el.innerHTML='ğŸ’•';
  if(type==='star') el.innerHTML='âœ¦';
  if(type==='petal') el.innerHTML='ğŸŒ¸';
  // random position & size & duration
  const left = Math.random()*window.innerWidth;
  el.style.left = left + 'px';
  const size = (type==='star'? (8+Math.random()*12) : (16+Math.random()*26));
  el.style.fontSize = size + 'px';
  const dur = (type==='petal' ? (5+Math.random()*6) : (7+Math.random()*6));
  el.style.animationDuration = dur + 's';
  document.body.appendChild(el);
  setTimeout(()=> el.remove(), (dur*1000)+200);
}

// continuous spawners
setInterval(()=>spawnFloating('heart'), 450);
setInterval(()=>spawnFloating('star'), 700);
setInterval(()=>spawnFloating('petal'), 650);

/* ------------------ Click heart trail ------------------ */
document.addEventListener('click', (ev)=>{
  // small particle on clicks (not interfering with buttons)
  if(ev.target.tagName.toLowerCase() === 'button' || ev.target.tagName.toLowerCase() === 'input') return;
  const h = document.createElement('div');
  h.className = 'clickHeart';
  h.innerHTML = 'ğŸ’—';
  h.style.left = ev.clientX + 'px';
  h.style.top = ev.clientY + 'px';
  document.body.appendChild(h);
  setTimeout(()=> h.remove(), 1000);
});

/* ------------------ Typewriter helper ------------------ */
function typeWriter(text, el, speed=36, callback){
  el.innerHTML = '';
  let i=0;
  function step(){
    if(i<text.length){
      el.innerHTML += text.charAt(i);
      i++;
      setTimeout(step, speed);
    }else{
      if(callback) callback();
    }
  }
  step();
}

/* ------------------ Shareable link generation ------------------ */
function setShareableURL(from, to){
  const base = location.origin + location.pathname;
  const params = new URLSearchParams({from, to});
  const url = `${base}?${params.toString()}`;
  history.replaceState(null, '', url); // updates address bar
  return url;
}

/* copy to clipboard helpers */
async function copyText(str){
  try{
    await navigator.clipboard.writeText(str);
    alert('Link copied to clipboard!');
  }catch(e){
    // fallback
    const ta = document.createElement('textarea');
    ta.value = str; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy'); ta.remove();
    alert('Link copied to clipboard!');
  }
}

/* ------------------ Main Flow ------------------ */
function generateProposal(){
  const from = (fromInp.value || '').trim();
  const to = (toInp.value || '').trim();
  if(!from || !to){ alert('Please enter both names.'); return; }
  currentFrom = from; currentTo = to;

  // update URL so linkable
  setShareableURL(currentFrom, currentTo);

  // play proposal music if allowed
  proposalMusic.play().catch(()=>{});

  // show step 2 & typewriter message
  showScreen('screen2');
  const t1 = document.getElementById('type1');
  const msg1 = `Hello ${escapeHtml(currentTo)} â¤ï¸\nğŠğ²ğš ğ€ğšğ© ğ˜ğ¡ğš ğ‚ğ¥ğ¢ğœğ¤ ğŠğ«ğ¨ğ ğ¢ ğŒğğ«ğ ğ‹ğ¢ğ²ğ ğğ¥ğ¬ ğŸ’•`;
  typeWriter(msg1, t1, 36);
}

function goToStep2(){
  showScreen('screen3');
  const t2 = document.getElementById('type2');
  const msg2 = `${escapeHtml(currentFrom)} ğ€ğšğ©ğ¬ğ ğğ¨ğ¥ğ§ğš ğ‚ğ¡ğšğ¡ğ­ğš ğ‡ğšğ¢... ğŸ’ğŸ’•\nğŠğ²ğš ğŒğšğ¢ ğ€ğšğ© ğ’ğ ğğ¨ğ¥ğğ®?`;
  typeWriter(msg2, t2, 36);
}

function goBack(step){
  if(step===1) { showScreen('screen1'); history.replaceState(null,'',location.pathname); }
  if(step===2) { showScreen('screen2'); }
}

/* ------------------ YES click -> love meter animation & final ------------------ */
function yesClick(){
  // heart bursts around button
  const yesBtn = document.getElementById('yesBtn');
  const rect = yesBtn.getBoundingClientRect();
  for(let i=0;i<14;i++){
    const b = document.createElement('div');
    b.className='burstHeart';
    b.innerHTML = ['ğŸ’','ğŸ’—','ğŸ’•'][Math.floor(Math.random()*3)];
    // random offsets
    const x = rect.left + rect.width/2 + (Math.random()*240 - 120);
    const y = rect.top + rect.height/2 + (Math.random()*120 - 60);
    b.style.left = x + 'px';
    b.style.top = y + 'px';
    b.style.color = `hsl(${Math.random()*50 + 300},80%,70%)`;
    document.body.appendChild(b);
    setTimeout(()=> b.remove(), 1200);
  }

  // show screen4 and animate love counter
  showScreen('screen4');
  const counter = document.getElementById('loveCounter');
  let v=0;
  const target = 143;
  const step = Math.max(1, Math.floor(target/60));
  const timer = setInterval(()=>{
    v += step;
    if(v>=target){ v=target; clearInterval(timer); }
    counter.textContent = v + ' â¤ï¸';
  }, 22);

  // prepare WhatsApp share message & update WA button
  updateWhatsAppButton();
}

/* ------------------ Celebration screen (Option B) ------------------ */
function showCelebrate(){
  // stop proposal music, start celebration music
  try { proposalMusic.pause(); } catch(e){}
  celebrationMusic.currentTime = 0;
  celebrationMusic.play().catch(()=>{});

  // show celebration screen
  showScreen('screen5');
  // softly spawn extra rose petals & confetti
  spawnConfettiSoft(28);
  // big floating hearts
  for(let i=0;i<10;i++){ setTimeout(()=> spawnFloatingBurstyHeart(), i*220); }
}

/* spawn romantic soft confetti pieces */
function spawnConfettiSoft(n){
  for(let i=0;i<n;i++){
    const c=document.createElement('div');
    c.className='confettiPiece';
    c.style.left = (Math.random()*100) + 'vw';
    c.style.background = ['#ffb6d9','#ff77aa','#ffd6ef','#fff0f8'][Math.floor(Math.random()*4)];
    c.style.width = (6+Math.random()*10)+'px';
    c.style.height = (8+Math.random()*14)+'px';
    c.style.top = (-10 - Math.random()*30)+'vh';
    c.style.animationDuration = (4+Math.random()*4)+'s';
    document.body.appendChild(c);
    setTimeout(()=> c.remove(), 9000);
  }
}

/* spawn larger hearts during celebrate */
function spawnFloatingBurstyHeart(){
  const h = document.createElement('div');
  h.className='heart';
  h.innerHTML='ğŸ’–';
  h.style.left = (30 + Math.random()*40) + 'vw';
  h.style.fontSize = (28 + Math.random()*36) + 'px';
  h.style.animationDuration = (6 + Math.random()*6) + 's';
  document.body.appendChild(h);
  setTimeout(()=> h.remove(), 9000);
}

/* ------------------ WhatsApp share & copy link ------------------ */
function getCurrentProposalURL(){
  const base = location.origin + location.pathname;
  const params = new URLSearchParams({from: currentFrom, to: currentTo});
  return `${base}?${params.toString()}`;
}

function updateWhatsAppButton(){
  const btn = document.getElementById('waShareBtn');
  if(!btn) return;
  btn.onclick = ()=> shareWhatsApp();
}

/* shareWhatsApp(true) will share celebration screen text */
function shareWhatsApp(isCelebration=false){
  const url = getCurrentProposalURL();
  let text;
  if(isCelebration){
    text = `She said YES! ğŸ’ğŸ’– ${currentFrom} & ${currentTo} â€” Celebrate with us: ${url}`;
  } else {
    text = `Hi ${currentTo}! ${currentFrom} has a special proposal for you ğŸ’– Open here: ${url}`;
  }
  const encoded = encodeURIComponent(text);
  const waUrl = `https://wa.me/?text=${encoded}`;
  // open WA in new tab
  window.open(waUrl, '_blank');
}

/* copy proposal link utility */
function copyProposalLink(){
  const url = getCurrentProposalURL();
  copyText(url);
}

/* copy current page url (could be empty if not generated) */
function copyCurrentURL(){
  const url = location.href;
  copyText(url);
}

/* reset */
function resetAll(){
  // pause all audios
  try{ celebrationMusic.pause(); }catch(e){}
  try{ proposalMusic.pause(); }catch(e){}
  // clear params
  history.replaceState(null,'',location.pathname);
  currentFrom = ''; currentTo = '';
  fromInp.value=''; toInp.value='';
  // return to home
  showScreen('screen1');
}

/* small helper to escape HTML in typewriter */
function escapeHtml(s){
  return String(s).replace(/[&<>"']/g, (m)=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]);
}

/* ------------------ Download screenshot (basic) ------------------ */
/* This uses html2canvas approach â€” but to avoid external libs, we do a simple fallback:
   - If browser supports 'navigator.clipboard' and 'html2canvas' isn't present, we try printing.
   For full accurate screenshot, integrate html2canvas on server or bundle it. */
function downloadScreenshot(){
  alert('To save a high-quality screenshot use your device screenshot feature (mobile: power+volume, desktop: PrintScreen).');
}

/* ------------------ Auto-fill from URL on page load ------------------ */
(function checkURLParams(){
  const p = new URLSearchParams(location.search);
  const f = p.get('from');
  const t = p.get('to');
  if(f) fromInp.value = f;
  if(t) toInp.value = t;
  // If both present, auto-generate immediate proposal view
  if(f && t){
    currentFrom = f; currentTo = t;
    // update URL canonical (ensure consistent encoding)
    setShareableURL(currentFrom, currentTo);
    // auto-show step2
    generateProposal();
  }
})();

</script>

</body>
</html>